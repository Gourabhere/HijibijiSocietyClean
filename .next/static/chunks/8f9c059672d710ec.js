(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t,a,i,n=e.i(43476),s=e.i(71645);let l=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:n="",children:r,iconNode:d,...c},h)=>(0,s.createElement)("svg",{ref:h,...o,width:t,height:t,stroke:e,strokeWidth:i?24*Number(a)/Number(t):a,className:l("lucide",n),...!r&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(r)?r:[r]])),c=(e,t)=>{let a=(0,s.forwardRef)(({className:a,...i},n)=>(0,s.createElement)(d,{ref:n,iconNode:t,className:l(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...i}));return a.displayName=r(e),a},h=c("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),g=c("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),p=c("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),m=c("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),x=c("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),u=c("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),y=c("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),f=c("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),v=c("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),j=c("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var b=e.i(47167);function k(){return false}function S(e){(0,s.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]);let t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(t.current)e.route&&t.current(e.route);else{let a=function(e={}){var t;if(!("u">typeof window)||null===e.route)return null;window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)});let a=e.scriptSrc?e.scriptSrc:k()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js";if(document.head.querySelector(`script[src*="${a}"]`))return null;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend));let i=document.createElement("script");return i.src=a,i.defer=!0,i.dataset.sdkn="@vercel/speed-insights"+(e.framework?`/${e.framework}`:""),i.dataset.sdkv="1.3.1",e.sampleRate&&(i.dataset.sampleRate=e.sampleRate.toString()),e.route&&(i.dataset.route=e.route),e.endpoint?i.dataset.endpoint=e.endpoint:e.basePath&&(i.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(i.dataset.dsn=e.dsn),k()&&!1===e.debug&&(i.dataset.debug="false"),i.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${a}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(i),{setRoute:e=>{i.dataset.route=e??void 0}}}({framework:e.framework??"react",basePath:e.basePath??function(){if(void 0!==b.default&&void 0!==b.default.env)return b.default.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...e});a&&(t.current=a.setRoute)}},[e.route]),null}var N=e.i(83642);let w=c("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),z=c("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),C=c("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),I=c("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),M=c("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),A=c("fingerprint-pattern",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]),T=c("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]),D=c("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),W=c("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var E=e.i(41202);let R=()=>{let{loginAsStaff:e,loginAsAdmin:t}=(0,N.useAuth)(),[a,i]=(0,s.useState)("role-select"),[l,r]=(0,s.useState)([]),[o,d]=(0,s.useState)(null),[c,h]=(0,s.useState)(""),[p,m]=(0,s.useState)(""),[x,u]=(0,s.useState)(""),[y,f]=(0,s.useState)(!1),[j,b]=(0,s.useState)(""),[k,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"staff-select"===a&&0===l.length&&(0,E.fetchStaffMembers)().then(e=>r(e)).catch(()=>b("Could not load staff list."))},[a]);let R=()=>{b(""),"staff-pin"===a?(i("staff-select"),h("")):("staff-select"===a||"admin-login"===a)&&(i("role-select"),h(""),m(""),u(""))},B=()=>{h(e=>e.slice(0,-1)),b("")},F=async t=>{if(!o)return;S(!0);let{error:a}=await e(o.id,o.name,t);a&&(b(a),h("")),S(!1)},L=async e=>{if(e.preventDefault(),!p||!x)return;b(""),S(!0);let{error:a}=await t(p,x);a&&b(a),S(!1)};return"role-select"===a?(0,n.jsx)("div",{className:"login-page",children:(0,n.jsxs)("div",{className:"login-container",children:[(0,n.jsxs)("div",{className:"login-brand animate-in",children:[(0,n.jsx)("div",{className:"login-logo",children:(0,n.jsx)("span",{className:"login-logo-icon",children:"ðŸ¢"})}),(0,n.jsx)("h1",{className:"login-title",children:"SocietyClean"}),(0,n.jsx)("p",{className:"login-subtitle",children:"Management Portal"})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{display:"flex",flexDirection:"column",gap:16},children:[(0,n.jsxs)("button",{className:"login-role-card",onClick:()=>i("staff-select"),children:[(0,n.jsx)("div",{className:"login-role-icon",style:{background:"var(--green-light)"},children:(0,n.jsx)(g,{size:28,color:"#059669"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"login-role-title",children:"Staff Login"}),(0,n.jsx)("div",{className:"login-role-desc",children:"Select your profile & enter PIN"})]})]}),(0,n.jsxs)("button",{className:"login-role-card",onClick:()=>i("admin-login"),children:[(0,n.jsx)("div",{className:"login-role-icon",style:{background:"var(--blue-light)"},children:(0,n.jsx)(z,{size:28,color:"#2563eb"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"login-role-title",children:"Admin Login"}),(0,n.jsx)("div",{className:"login-role-desc",children:"Sign in to manage housekeeping"})]})]})]})]})}):"staff-select"===a?(0,n.jsx)("div",{className:"login-page",children:(0,n.jsxs)("div",{className:"login-container",style:{maxWidth:420},children:[(0,n.jsxs)("div",{className:"login-header animate-in",children:[(0,n.jsx)("button",{className:"login-back-btn",onClick:R,children:(0,n.jsx)(w,{size:20})}),(0,n.jsx)("span",{className:"login-header-title",children:"Staff Login"}),(0,n.jsx)("div",{style:{width:42}})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{textAlign:"center",marginBottom:28},children:[(0,n.jsx)("div",{className:"login-hero-icon",style:{background:"var(--green-light)"},children:(0,n.jsx)(g,{size:32,color:"#059669"})}),(0,n.jsx)("h2",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)",textTransform:"uppercase",letterSpacing:1,marginBottom:4},children:"Select Your Profile"}),(0,n.jsx)("p",{style:{fontSize:14,color:"var(--text-muted)",fontWeight:500},children:"Tap on your name to continue"})]}),j&&(0,n.jsx)("div",{className:"login-error",style:{marginBottom:16,textAlign:"center"},children:j}),(0,n.jsx)("div",{className:"staff-grid animate-in animate-in-delay-2",children:l.map(e=>(0,n.jsxs)("button",{className:"staff-card",onClick:()=>{d(e),h(""),b(""),i("staff-pin")},children:[(0,n.jsx)("div",{className:"staff-avatar-ring",children:(0,n.jsx)("img",{src:e.avatar,alt:e.name,className:"staff-avatar-img"})}),(0,n.jsx)("div",{className:"staff-card-name",children:e.name}),(0,n.jsx)("div",{className:"staff-card-info",children:e.blockAssignment})]},e.id))}),0===l.length&&!j&&(0,n.jsxs)("div",{style:{textAlign:"center",padding:40},children:[(0,n.jsx)(v,{size:28,className:"spin",style:{color:"var(--blue)"}}),(0,n.jsx)("div",{style:{marginTop:12,fontSize:13,color:"var(--text-muted)"},children:"Loading staff..."})]})]})}):"staff-pin"===a?(0,n.jsx)("div",{className:"login-page",children:(0,n.jsxs)("div",{className:"login-container",style:{maxWidth:380},children:[(0,n.jsxs)("div",{className:"login-header animate-in",children:[(0,n.jsx)("button",{className:"login-back-btn",onClick:R,children:(0,n.jsx)(w,{size:20})}),(0,n.jsx)("span",{className:"login-header-title",children:"Staff Login"}),(0,n.jsx)("div",{style:{width:42}})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{textAlign:"center",marginBottom:24},children:[(0,n.jsx)("div",{className:"pin-avatar-ring",children:(0,n.jsx)("img",{src:o?.avatar,alt:o?.name,className:"pin-avatar-img"})}),(0,n.jsx)("h2",{style:{fontSize:22,fontWeight:800,color:"var(--text-primary)",marginBottom:2},children:o?.name}),(0,n.jsx)("button",{className:"pin-change-profile",onClick:R,children:"Tap to change profile"})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-2",style:{textAlign:"center",marginBottom:20},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:16},children:[(0,n.jsx)(A,{size:18,color:"var(--text-muted)"}),(0,n.jsx)("span",{style:{fontSize:13,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)"},children:"Enter PIN"})]}),(0,n.jsx)("div",{className:"pin-dots",children:[0,1,2,3].map(e=>(0,n.jsx)("div",{className:`pin-dot ${e<c.length?"filled":""}`},e))}),j&&(0,n.jsx)("div",{style:{fontSize:13,fontWeight:600,color:"var(--coral)",marginTop:8},children:j}),(0,n.jsx)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)",marginTop:8},children:"Default PIN: 1234"})]}),(0,n.jsx)("div",{className:"pin-keypad animate-in animate-in-delay-3",children:["1","2","3","4","5","6","7","8","9","","0","del"].map((e,t)=>""===e?(0,n.jsx)("div",{className:"pin-key-spacer"},t):"del"===e?(0,n.jsx)("button",{className:"pin-key pin-key-del",onClick:B,children:(0,n.jsx)(T,{size:22})},t):(0,n.jsx)("button",{className:"pin-key",onClick:()=>(e=>{if(c.length>=4)return;let t=c+e;h(t),b(""),4===t.length&&o&&F(t)})(e),children:e},t))}),k&&(0,n.jsx)("div",{style:{textAlign:"center",marginTop:20},children:(0,n.jsx)(v,{size:28,className:"spin",style:{color:"var(--blue)"}})})]})}):(0,n.jsx)("div",{className:"login-page",children:(0,n.jsxs)("div",{className:"login-container",style:{maxWidth:380},children:[(0,n.jsxs)("div",{className:"login-header animate-in",children:[(0,n.jsx)("button",{className:"login-back-btn",onClick:R,children:(0,n.jsx)(w,{size:20})}),(0,n.jsx)("span",{className:"login-header-title",children:"Admin Login"}),(0,n.jsx)("div",{style:{width:42}})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{textAlign:"center",marginBottom:32},children:[(0,n.jsx)("div",{className:"login-hero-icon login-hero-icon-lg",style:{background:"var(--blue-light)"},children:(0,n.jsx)(z,{size:36,color:"#2563eb"})}),(0,n.jsx)("h2",{style:{fontSize:24,fontWeight:800,color:"var(--text-primary)",marginBottom:4},children:"Admin Access"}),(0,n.jsx)("p",{style:{fontSize:14,color:"var(--text-muted)",fontWeight:500},children:"Sign in to manage your society housekeeping"})]}),(0,n.jsxs)("form",{onSubmit:L,className:"animate-in animate-in-delay-2",children:[(0,n.jsxs)("div",{className:"neu-input-group",style:{marginBottom:16},children:[(0,n.jsx)("label",{className:"neu-label",children:"Username"}),(0,n.jsxs)("div",{className:"neu-input-wrapper",children:[(0,n.jsx)(D,{size:18,style:{position:"absolute",left:14,color:"var(--text-muted)",zIndex:1}}),(0,n.jsx)("input",{type:"text",className:"neu-input",style:{paddingLeft:42},placeholder:"Enter username",value:p,onChange:e=>m(e.target.value),required:!0})]})]}),(0,n.jsxs)("div",{className:"neu-input-group",style:{marginBottom:12},children:[(0,n.jsx)("label",{className:"neu-label",children:"Password"}),(0,n.jsxs)("div",{className:"neu-input-wrapper",children:[(0,n.jsx)(W,{size:18,style:{position:"absolute",left:14,color:"var(--text-muted)",zIndex:1}}),(0,n.jsx)("input",{type:y?"text":"password",className:"neu-input",style:{paddingLeft:42},placeholder:"Enter password",value:x,onChange:e=>u(e.target.value),required:!0}),(0,n.jsx)("button",{type:"button",className:"neu-input-action",onClick:()=>f(!y),children:y?(0,n.jsx)(I,{size:16}):(0,n.jsx)(C,{size:16})})]})]}),(0,n.jsx)("div",{style:{textAlign:"center",marginBottom:20},children:(0,n.jsx)("span",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:"Default: admin / admin123"})}),j&&(0,n.jsx)("div",{className:"login-error",style:{marginBottom:16},children:j}),(0,n.jsx)("button",{type:"submit",className:"neu-btn-login",disabled:k,children:k?(0,n.jsx)(v,{size:20,className:"spin"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M,{size:20})," Sign In"]})})]})]})})};(t={}).MANAGER="MANAGER",t.STAFF="STAFF";var B=((a={}).ROUTINE_HOUSEKEEPING="Routine Housekeeping",a.BROOMING="Brooming",a.MOPPING="Mopping",a.DRIVEWAY="Driveway Cleaning",a.GLASS_CLEANING="Glass Cleaning",a.STAIRCASE="Staircase Cleaning",a);(i={}).DAILY="Daily",i.WEEKLY="Weekly";let F=[1,2,3,4,5,6,7,8,9,10,11,12],L=e=>()=>e,O=[{block:1,label:"Block 1",flatsPerFloor:e=>e<=8?["A","B","C","D","E","F"]:["A","B","C"]},{block:2,label:"Block 2",flatsPerFloor:L(["A","B","C","D"])},{block:3,label:"Block 3",flatsPerFloor:L(["A","B","C","D","E"])},{block:4,label:"Block 4",flatsPerFloor:L(["A","B","C","D","E"])},{block:5,label:"Block 5",flatsPerFloor:L(["A","B","C","D","E"])},{block:6,label:"Block 6",flatsPerFloor:L(["A","B","C","D"])}],P=[{type:"Routine Housekeeping",label:"Routine Housekeeping",icon:"ðŸ—‘ï¸",perFlat:!0},{type:"Brooming",label:"Lobby Brooming",icon:"ðŸ§¹",perFlat:!1},{type:"Mopping",label:"Floor Mopping",icon:"ðŸ§¼",perFlat:!1},{type:"Staircase Cleaning",label:"Staircase Cleaning",icon:"ðŸªœ",perFlat:!1}],$=[{id:"glass-entrance",type:"Glass Cleaning",label:"Entrance Glass Cleaning",icon:"ðŸªŸ"}],H=[{id:"driveway-broom",type:"Driveway Cleaning",label:"Driveway Cleaning",icon:"ðŸš—",area:"Society Driveway"}],U=c("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),G=c("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),q=c("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),V=c("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Y=c("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),_=c("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var K=e.i(88715);let J=null;J=(0,K.createClient)("https://bhdrlzaqejkrqsozbcbr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJoZHJsemFxZWprcnFzb3piY2JyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4NzM4OTAsImV4cCI6MjA4NTQ0OTg5MH0.W1kWS99fv-QjQI_eVE3XvPhMWbgMQoGqOtaUHcVlP9s");let Z=async()=>{if(!J)return new Map;let e=new Date,t=e.toLocaleString("default",{month:"long"}),a=e.getFullYear(),i=`${t}_${a}`,{data:n,error:s}=await J.from("Collections_2026").select(`Flat_No, ${i}`);if(s)return console.error("Error fetching payment status:",s),new Map;let l=new Map;return n.forEach(e=>{let t=e.Flat_No?.trim();if(!t)return;let a=e[i],n=0===a||"0"===a||"string"==typeof a&&"N/A"===a.trim().toUpperCase();l.set(t,!n)}),l},Q=({percentage:e,size:t=160,strokeWidth:a=14})=>{let i=(t-a)/2,s=2*Math.PI*i;return(0,n.jsxs)("div",{className:"progress-ring-container",style:{width:t,height:t},children:[(0,n.jsxs)("svg",{width:t,height:t,style:{transform:"rotate(-90deg)"},children:[(0,n.jsx)("circle",{cx:t/2,cy:t/2,r:i,fill:"none",stroke:"var(--neu-dark)",strokeWidth:a}),(0,n.jsx)("circle",{cx:t/2,cy:t/2,r:i,fill:"none",stroke:"url(#gradient)",strokeWidth:a,strokeDasharray:s,strokeDashoffset:s-e/100*s,strokeLinecap:"round",style:{transition:"stroke-dashoffset 1s ease-out"}}),(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#3b82f6"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#10b981"})]})})]}),(0,n.jsxs)("div",{style:{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)("div",{style:{width:48,height:48,borderRadius:14,background:"var(--blue-light)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:6},children:(0,n.jsx)(V,{size:22,color:"#3b82f6"})}),(0,n.jsx)("span",{style:{fontSize:10,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:.5},children:"Live Feed"})]})]})},X=({icon:e,title:t,desc:a,bgColor:i,onClick:s})=>(0,n.jsxs)("div",{className:"neu-card",onClick:s,style:{display:"flex",alignItems:"center",gap:14,padding:"18px 18px",cursor:"pointer"},children:[(0,n.jsx)("div",{style:{width:46,height:46,borderRadius:14,background:i,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,n.jsx)("span",{style:{fontSize:22},children:e})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:t}),(0,n.jsx)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:a})]})]}),ee=({item:e,requester:t,time:a,onApprove:i,onReject:s})=>(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:12,padding:"16px 18px"},children:[(0,n.jsx)("div",{style:{width:42,height:42,borderRadius:14,background:"var(--green-light)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,n.jsx)("span",{style:{fontSize:18},children:"ðŸ“¦"})}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e}),(0,n.jsxs)("div",{style:{fontSize:11,fontWeight:500,color:"var(--text-muted)"},children:["Requested by ",t," Â· ",a]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,flexShrink:0},children:[(0,n.jsx)("button",{onClick:s,className:"btn-approve",style:{background:"var(--coral-light)",color:"var(--coral)"},children:(0,n.jsx)(G,{size:14})}),(0,n.jsx)("button",{onClick:i,className:"btn-approve",style:{background:"var(--green-light)",color:"var(--green)"},children:(0,n.jsx)(U,{size:14})})]})]}),et=({logs:e,tasks:t,supplyRequests:a,onApproveSupply:i,onRejectSupply:l,staffMembers:r,punchLogs:o,onNavigate:d,onExport:c})=>{let[h,g]=s.default.useState(!1),[p,m]=s.default.useState(null),[x,u]=s.default.useState(""),[y,f]=s.default.useState(!1),[v,j]=s.default.useState({name:"",role:"Housekeeper",blockAssignment:"",avatar:""}),[b,k]=s.default.useState(!1),[S,N]=s.default.useState(new Map),[w,z]=s.default.useState(!0),C=new Date().setHours(0,0,0,0),I=e.filter(e=>e.timestamp>=C);s.default.useEffect(()=>{Z().then(e=>{N(e),z(!1)})},[]);let M=s.default.useMemo(()=>{let e;return w?0:(e=0+H.length,O.forEach(t=>{e+=$.length,F.forEach(a=>{let i=t.flatsPerFloor(a).filter(e=>{let i=`${t.block}${e}${a}`;return S.has(i)&&!0===S.get(i)});e+=P.filter(e=>e.perFlat).length*i.length,e+=P.filter(e=>!e.perFlat).length})}),e)},[w,S]),A=I.filter(e=>{if("COMPLETED"!==e.status)return!1;if(e.flat&&e.block&&e.floor){let t=`${e.block}${e.flat}${e.floor}`;if(!w&&S.size>0)return!0===S.get(t)}return!0}).length,T=M>0?Math.round(A/M*100):0,D=s.default.useMemo(()=>{if(w)return{garbage:{done:0,total:0},brooming:{done:0,total:0}};let e=0,t=0;O.forEach(a=>{F.forEach(i=>{let n=a.flatsPerFloor(i).filter(e=>{let t=`${a.block}${e}${i}`;return S.has(t)&&!0===S.get(t)});e+=n.length,P.some(e=>e.type===B.BROOMING)&&(t+=1)})});let a=I.filter(e=>{if("COMPLETED"!==e.status||!(e.taskId===B.ROUTINE_HOUSEKEEPING||e.taskId.includes("Routine")||e.taskId.includes("Garbage")))return!1;if(e.flat&&e.block&&e.floor){let t=`${e.block}${e.flat}${e.floor}`;return!0===S.get(t)}return!1}).length,i=I.filter(e=>"COMPLETED"===e.status&&(e.taskId===B.BROOMING||e.taskId.includes("Brooming"))).length;return{garbage:{done:a,total:e},brooming:{done:i,total:t}}},[w,S,I]),W=D.garbage.total>0?Math.round(D.garbage.done/D.garbage.total*100):0,R=D.brooming.total>0?Math.round(D.brooming.done/D.brooming.total*100):0,L=a.filter(e=>"OPEN"===e.status),U=async()=>{if(!v.name||!v.blockAssignment)return void alert("Name and Block Assignment are required");k(!0);try{await (0,E.insertStaffMember)({name:v.name,role:"Housekeeper",avatar:v.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(v.name)}&background=random`,blockAssignment:v.blockAssignment}),g(!1),u(""),f(!1),j({name:"",role:"Housekeeper",blockAssignment:"",avatar:""}),alert("Staff added successfully!")}catch(e){alert("Failed to add staff: "+e.message)}finally{k(!1)}};return(0,n.jsxs)("div",{style:{paddingBottom:16},children:[h&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("div",{className:"neu-card",style:{width:320,padding:24,background:"var(--bg-card)"},children:y?(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,n.jsx)("h3",{style:{margin:0},children:"Add New Staff"}),(0,n.jsx)("input",{placeholder:"Staff Name",value:v.name,onChange:e=>j({...v,name:e.target.value}),style:{padding:12,borderRadius:8,border:"none",background:"var(--bg-inset)",color:"var(--text-primary)"}}),(0,n.jsx)("input",{placeholder:"Block Assignment (e.g., Block 1)",value:v.blockAssignment,onChange:e=>j({...v,blockAssignment:e.target.value}),style:{padding:12,borderRadius:8,border:"none",background:"var(--bg-inset)",color:"var(--text-primary)"}}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginTop:8},children:[(0,n.jsx)("button",{onClick:()=>g(!1),className:"btn-ghost",style:{flex:1},children:"Cancel"}),(0,n.jsx)("button",{onClick:U,className:"neu-button",disabled:b,style:{flex:1,color:"white",background:"var(--green)"},children:b?"Saving...":"Save"})]})]}):(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,n.jsx)("h3",{style:{margin:0,textAlign:"center"},children:"Admin Access"}),(0,n.jsx)("input",{type:"password",placeholder:"Enter Credential PIN",value:x,onChange:e=>u(e.target.value),style:{padding:12,borderRadius:8,border:"1px solid var(--text-muted)",background:"var(--bg-inset)",color:"var(--text-primary)",outline:"none"}}),(0,n.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,n.jsx)("button",{onClick:()=>g(!1),className:"btn-ghost",style:{flex:1},children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>{"1234"===x?f(!0):alert("Invalid Credential")},className:"neu-button",style:{flex:1,color:"white",background:"var(--blue)"},children:"Verify"})]})]})})}),p&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>m(null),children:(0,n.jsxs)("div",{className:"neu-card",style:{width:300,padding:24,background:"var(--bg-card)",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{onClick:()=>m(null),style:{position:"absolute",top:12,right:12,background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:(0,n.jsx)(G,{size:20})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:20},children:[(0,n.jsx)("img",{src:p.avatar,alt:p.name,className:"avatar",style:{width:80,height:80,marginBottom:12}}),(0,n.jsx)("h3",{style:{margin:0,fontSize:18},children:p.name}),(0,n.jsx)("span",{style:{fontSize:13,color:"var(--text-muted)"},children:p.role})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",background:"var(--bg-inset)",borderRadius:8},children:[(0,n.jsx)("span",{style:{fontSize:13,fontWeight:600},children:"Block Assignment"}),(0,n.jsx)("span",{style:{fontSize:13},children:p.blockAssignment})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",background:"var(--bg-inset)",borderRadius:8},children:[(0,n.jsx)("span",{style:{fontSize:13,fontWeight:600},children:"Tasks Today"}),(0,n.jsx)("span",{style:{fontSize:13},children:e.filter(e=>e.staffId===p.id&&e.timestamp>=C&&"COMPLETED"===e.status).length})]})]}),(0,n.jsx)("div",{style:{marginTop:20,textAlign:"center"},children:(0,n.jsx)("button",{className:"neu-button",style:{width:"100%"},onClick:()=>m(null),children:"Close"})})]})}),(0,n.jsxs)("div",{className:"animate-in",style:{marginBottom:24},children:[(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("span",{className:"section-title",children:"On-Duty Staff"}),(0,n.jsx)("button",{className:"btn-ghost",style:{fontSize:13,fontWeight:600,color:"var(--blue)",padding:"4px 8px"},children:"View All"})]}),(0,n.jsx)("div",{style:{display:"flex",gap:20,overflowX:"auto",paddingBottom:4},className:"no-scrollbar",children:(0,n.jsx)("div",{style:{display:"flex",gap:20,overflowX:"auto",paddingBottom:4},className:"no-scrollbar",children:0===r.filter(e=>{let t=o.filter(t=>t.staffId===e.id&&t.timestamp>=C).sort((e,t)=>t.timestamp-e.timestamp);return t.length>0&&"IN"===t[0].type}).length?(0,n.jsx)("div",{style:{padding:"0 8px",fontSize:13,color:"var(--text-muted)",fontStyle:"italic"},children:"No staff currently on duty."}):(0,n.jsxs)(n.Fragment,{children:[r.map(e=>{let t=o.filter(t=>t.staffId===e.id&&t.timestamp>=C).sort((e,t)=>t.timestamp-e.timestamp);if(!(t.length>0&&"IN"===t[0].type))return null;let a=I.filter(t=>t.staffId===e.id&&"COMPLETED"===t.status).length;return(0,n.jsxs)("div",{onClick:()=>m(e),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,minWidth:72,cursor:"pointer"},children:[(0,n.jsx)("img",{src:e.avatar,alt:e.name,className:"avatar avatar-lg",style:{width:56,height:56}}),(0,n.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-primary)",textAlign:"center",lineHeight:1.2},children:[e.name.split(" ")[0]," ",e.name.split(" ")[1]?.[0],"."]}),(0,n.jsxs)("span",{style:{fontSize:10,fontWeight:500,color:"var(--green)"},children:[a," tasks today"]})]},e.id)}),(0,n.jsxs)("button",{onClick:()=>g(!0),style:{minWidth:72,height:90,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:6,background:"transparent",border:"none",cursor:"pointer"},children:[(0,n.jsx)("div",{style:{width:56,height:56,borderRadius:"50%",background:"var(--bg-inset)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",border:"1px dashed var(--text-muted)"},children:(0,n.jsx)(_,{size:24})}),(0,n.jsx)("span",{style:{fontSize:11,fontWeight:600,color:"var(--text-muted)"},children:"Add New"})]})]})})})]}),(0,n.jsxs)("div",{className:"neu-card-inset animate-in animate-in-delay-1",style:{marginBottom:24,textAlign:"center",padding:24},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16},children:[(0,n.jsx)("span",{className:"section-title",children:"Daily Progress"}),(0,n.jsxs)("div",{style:{textAlign:"right"},children:[(0,n.jsxs)("div",{style:{fontSize:28,fontWeight:800,color:"var(--text-primary)",lineHeight:1},children:[T,"%"]}),(0,n.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:.5},children:"Average"})]})]}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:16},children:(0,n.jsx)(Q,{percentage:T})}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:24},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"var(--green)"}}),(0,n.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-secondary)"},children:["Garbage: ",W,"%"]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"var(--blue)"}}),(0,n.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-secondary)"},children:["Brooming: ",R,"%"]})]})]})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-2",style:{marginBottom:24},children:[(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("span",{className:"section-title",children:"Supplies Status"}),L.length>0&&(0,n.jsxs)("span",{className:"badge badge-green",children:[L.length," New Requests"]})]}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:0===L.length?(0,n.jsx)("div",{style:{padding:20,textAlign:"center",color:"var(--text-muted)",fontSize:13,background:"var(--bg-inset)",borderRadius:12},children:"No pending supply requests."}):L.map(e=>{let t=r.find(t=>t.id===e.requesterId),a=Math.round((Date.now()-e.timestamp)/6e4);return(0,n.jsx)(ee,{item:`${e.item} (${e.quantity})`,requester:t?.name.split(" ")[0]||"Staff",time:`${a}m ago`,onApprove:()=>i(e.id),onReject:()=>l(e.id)},e.id)})})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-3",style:{marginBottom:24},children:[(0,n.jsx)("div",{className:"section-header",children:(0,n.jsx)("span",{className:"section-title",children:"Zone Monitoring"})}),(0,n.jsx)("div",{className:"neu-card",style:{padding:0,overflow:"hidden",position:"relative",height:180},children:(0,n.jsxs)("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, var(--blue-bg) 0%, var(--green-bg) 50%, var(--yellow-bg) 100%)",display:"flex",alignItems:"flex-end",justifyContent:"space-between",padding:16,position:"relative"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:40,left:"30%",width:12,height:12,borderRadius:"50%",background:I.some(e=>1===e.block)?"var(--green)":"var(--red)",boxShadow:"0 0 0 4px rgba(255,255,255,0.2)"}}),(0,n.jsx)("div",{style:{position:"absolute",top:70,left:"50%",width:12,height:12,borderRadius:"50%",background:I.some(e=>2===e.block)?"var(--green)":"var(--red)",boxShadow:"0 0 0 4px rgba(255,255,255,0.2)"}}),(0,n.jsx)("div",{style:{position:"absolute",top:55,left:"65%",width:12,height:12,borderRadius:"50%",background:I.some(e=>3===e.block)?"var(--green)":"var(--red)",boxShadow:"0 0 0 4px rgba(255,255,255,0.2)"}}),(0,n.jsx)("div",{style:{position:"absolute",top:90,left:"40%",width:12,height:12,borderRadius:"50%",background:I.some(e=>4===e.block)?"var(--green)":"var(--red)",boxShadow:"0 0 0 4px rgba(255,255,255,0.2)"}}),(0,n.jsxs)("div",{style:{background:"rgba(255,255,255,0.85)",borderRadius:10,padding:"8px 14px",fontSize:11,fontWeight:700,color:"var(--text-secondary)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",gap:4,boxShadow:"var(--neu-raised-sm)"},children:[(0,n.jsx)(q,{size:12})," Live Zone Coverage"]}),(0,n.jsx)("button",{style:{width:46,height:46,borderRadius:"50%",background:"var(--blue)",color:"white",border:"none",cursor:"pointer",fontSize:22,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 14px rgba(59,130,246,0.4)"},children:"+"})]})})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-4",style:{marginBottom:20},children:[(0,n.jsx)("div",{className:"section-header",children:(0,n.jsx)("span",{className:"section-title",children:"Management Hub"})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[(0,n.jsx)(X,{icon:"ðŸ‘¤",title:"Manage Staff",desc:"Add, edit profiles & schedules",color:"var(--purple)",bgColor:"var(--purple-light)",onClick:()=>d("STAFF")}),(0,n.jsx)(X,{icon:"ðŸ“¦",title:"Inventory Management",desc:"Restock alerts & tracking",color:"var(--coral)",bgColor:"var(--coral-light)",onClick:()=>d("STOCK")}),(0,n.jsx)(X,{icon:"ðŸ“‹",title:"System Logs",desc:"View all system activities",color:"var(--green)",bgColor:"var(--green-light)",onClick:()=>d("LOGS")}),(0,n.jsxs)("button",{className:"neu-card",onClick:c,style:{textAlign:"center",padding:"18px 16px",cursor:"pointer",width:"100%",fontSize:15,fontWeight:700,color:"var(--text-primary)",fontFamily:"inherit",borderRadius:"var(--radius)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:10},children:[(0,n.jsx)(Y,{size:18})," Export Monthly Report"]})]})]})]})},ea=c("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ei=c("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),en=c("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),es=async(e,t="societyclean/proof-of-work")=>{let a=e.startsWith("data:")?e:`data:image/jpeg;base64,${e}`,i=new FormData;i.append("file",a),i.append("upload_preset","ml_default"),i.append("folder",t);let n=await fetch("https://api.cloudinary.com/v1_1/demodqx39/image/upload",{method:"POST",body:i});if(!n.ok){let e=await n.text();throw Error(`Cloudinary upload failed (${n.status}): ${e}`)}let s=await n.json();return{secure_url:s.secure_url,public_id:s.public_id,width:s.width,height:s.height,format:s.format,created_at:s.created_at}};async function el(e,t){return new Promise((a,i)=>{let n=new Image;n.onload=()=>{let i=document.createElement("canvas");i.width=n.width,i.height=n.height;let s=i.getContext("2d");if(!s)return void a(e);s.drawImage(n,0,0);let l=new Date,r=l.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),o=l.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),d=`${r}  ${o}`,c=Math.max(14,Math.round(.035*n.width));s.font=`bold ${c}px 'Arial', sans-serif`;let h=Math.round(.5*c),g=Math.round(1.2*c),p=s.measureText(d).width;t&&(p=Math.max(p,s.measureText(t).width));let m=t?2*g:g,x=n.width-p-2*h,u=n.height-m-2*h;s.fillStyle="rgba(0, 0, 0, 0.6)",s.beginPath(),s.roundRect(x-h,u-h,p+2*h,m+2*h,6),s.fill(),s.fillStyle="#ffffff",s.textBaseline="top",t?(s.fillText(t,x,u),s.fillText(d,x,u+g)):s.fillText(d,x,u),a(i.toDataURL("image/jpeg",.9))},n.onerror=()=>a(e),n.src=e})}let er=({currentUser:e,logs:t,onLogTask:a,staffMembers:i})=>{let l,[r,o]=(0,s.useState)("blocks"),[d,c]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[p,m]=(0,s.useState)(!1),[x,u]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),[j,b]=(0,s.useState)(!1),k=(0,s.useRef)(null),S=(0,s.useRef)(null),N=(0,s.useRef)(null),[z,C]=(0,s.useState)(new Map),[I,M]=(0,s.useState)(!0);(0,s.useEffect)(()=>{Z().then(e=>{C(e),M(!1)})},[]);let A=i.find(t=>t.id===e),T=new Date().setHours(0,0,0,0),D=t.filter(e=>e.timestamp>=T),W=(e,t,a,i)=>D.some(n=>n.block===e&&n.floor===t&&n.taskId===a&&(i?n.flat===i:!n.flat)),E=(e,t)=>D.some(a=>a.taskId===e&&a.block===t),R=()=>{"tasks"===r?(o("floors"),g(null)):"floors"===r&&(o("blocks"),c(null))},B=async(e,t,a,i)=>{f({taskId:e,taskType:t,flat:a,block:i}),b(!0);try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1});S.current=e,setTimeout(()=>{k.current&&(k.current.srcObject=e,k.current.play())},100)}catch(e){console.error("Camera error:",e),alert("Unable to access camera. Please ensure you have granted camera permissions and are using HTTPS or localhost."),b(!1),f(null)}},L=(0,s.useCallback)(()=>{S.current&&(S.current.getTracks().forEach(e=>e.stop()),S.current=null),b(!1)},[]),q=async()=>{if(!k.current||!N.current||!y)return;let t=k.current,i=N.current;i.width=t.videoWidth,i.height=t.videoHeight;let n=i.getContext("2d");if(!n)return;n.drawImage(t,0,0),L();let s=i.toDataURL("image/jpeg",.85);u(`${y.taskType}-${y.flat||"area"}`),m(!0);let l=s;try{let e="";if(y.flat&&d)e=`Block ${d.block} - Flat ${y.flat} (Floor ${h})`;else if(h&&d)e=`Block ${d.block} - Floor ${h}`;else if(y.block)e=`Block ${y.block}`;else{let t=H.find(e=>e.id===y.taskId);e=t?t.area:"Common Area"}let t=await el(s,e),a=A?.name.replace(/\s+/g,"_")||"unknown",i=d?`B${d.block}`:"Common",n=h?`/F${h}`:"",r=`societyclean/${i}${n}/${a}`;l=(await es(t,r)).secure_url}catch{}a({taskId:y.taskId,staffId:e,timestamp:Date.now(),status:"COMPLETED",imageUrl:l,block:y.block||(d?d.block:void 0),floor:h||void 0,flat:y.flat||void 0}),m(!1),u(null),f(null)};return(0,n.jsxs)("div",{style:{paddingBottom:16},children:["blocks"===r&&(l=D.length,(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"neu-card animate-in",style:{marginBottom:22,padding:20,display:"flex",alignItems:"center",gap:16},children:[(0,n.jsx)("div",{style:{width:54,height:54,borderRadius:"50%",background:"linear-gradient(135deg, var(--blue), var(--purple))",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:16,fontWeight:800,flexShrink:0,boxShadow:"0 4px 14px rgba(99, 102, 241, 0.3)"},children:l}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:16,fontWeight:700,color:"var(--text-primary)"},children:A?`Hi, ${A.name}`:"My Tasks"}),(0,n.jsxs)("div",{style:{fontSize:13,fontWeight:500,color:"var(--text-secondary)"},children:[l," tasks completed today"]})]})]}),(0,n.jsxs)("div",{className:"section-header animate-in animate-in-delay-1",children:[(0,n.jsx)("span",{style:{fontSize:17,fontWeight:700,color:"var(--text-primary)"},children:"Select Block"}),(0,n.jsx)("span",{className:"section-label",children:"6 BLOCKS"})]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:14,marginBottom:24},className:"animate-in animate-in-delay-1",children:O.map((e,t)=>{let{done:a,total:i}=(e=>{let t=O.find(t=>t.block===e);if(!t)return{done:0,total:0};let a=0,i=0;return F.forEach(n=>{let s=t.flatsPerFloor(n),l=P.filter(e=>e.perFlat);a+=l.length*s.length,i+=l.reduce((t,a)=>t+s.filter(t=>W(e,n,a.type,t)).length,0);let r=P.filter(e=>!e.perFlat);a+=r.length,i+=r.filter(t=>W(e,n,t.type)).length}),a+=$.length,{done:i+=$.filter(t=>E(t.id,e)).length,total:a}})(e.block),s=i>0?Math.round(a/i*100):0;return(0,n.jsxs)("button",{onClick:()=>{c(e),o("floors")},className:"neu-card",style:{cursor:"pointer",textAlign:"center",padding:22,display:"flex",flexDirection:"column",alignItems:"center",gap:10,border:"none",fontFamily:"inherit",transition:"all 0.2s ease",animationDelay:`${60*t}ms`},children:[(0,n.jsx)("div",{style:{width:52,height:52,borderRadius:16,background:100===s?"linear-gradient(135deg, #10b981, #059669)":`linear-gradient(135deg, ${["#6366f1","#3b82f6","#f97316","#06b6d4","#8b5cf6","#ec4899"][t]}, ${["#818cf8","#60a5fa","#fb923c","#22d3ee","#a78bfa","#f472b6"][t]})`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:`0 4px 14px ${["rgba(99,102,241,0.3)","rgba(59,130,246,0.3)","rgba(249,115,22,0.3)","rgba(6,182,212,0.3)","rgba(139,92,246,0.3)","rgba(236,72,153,0.3)"][t]}`},children:(0,n.jsx)(en,{size:24})}),(0,n.jsxs)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:["Block ",e.block]}),(0,n.jsxs)("div",{style:{fontSize:11,fontWeight:600,color:100===s?"var(--green)":"var(--text-muted)"},children:[a,"/",i," done"]}),(0,n.jsx)("div",{style:{width:"100%",height:4,borderRadius:2,background:"var(--bg-inset)",overflow:"hidden"},children:(0,n.jsx)("div",{style:{width:`${s}%`,height:"100%",borderRadius:2,background:100===s?"var(--green)":"var(--blue)",transition:"width 0.3s"}})})]},e.block)})}),(0,n.jsxs)("div",{className:"section-header animate-in animate-in-delay-2",children:[(0,n.jsx)("span",{style:{fontSize:17,fontWeight:700,color:"var(--text-primary)"},children:"Common Areas"}),(0,n.jsx)("span",{className:"section-label",children:"DAILY"})]}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},className:"animate-in animate-in-delay-2",children:H.map(e=>{let t,a=(t=e.id,D.some(e=>e.taskId===t));return(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px"},children:[(0,n.jsx)("span",{style:{fontSize:22},children:e.icon}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:e.label}),(0,n.jsx)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:e.area})]}),a?(0,n.jsx)("div",{className:"check-circle done",children:(0,n.jsx)(U,{size:14})}):(0,n.jsxs)("button",{onClick:()=>B(e.id,e.type),style:{background:"var(--blue)",color:"white",border:"none",borderRadius:10,padding:"8px 14px",fontSize:12,fontWeight:700,cursor:"pointer",fontFamily:"inherit",display:"flex",alignItems:"center",gap:6},children:[(0,n.jsx)(ea,{size:14})," Capture"]})]},e.id)})})]})),"floors"===r&&(d?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:20},className:"animate-in",children:[(0,n.jsx)("button",{onClick:R,className:"btn-icon",style:{flexShrink:0},children:(0,n.jsx)(w,{size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)"},children:d.label}),(0,n.jsx)("div",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)"},children:"Select Floor"})]})]}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:F.map((e,t)=>{let a=d.flatsPerFloor(e).filter(t=>{let a=`${d.block}${t}${e}`;return z.has(a)&&!0===z.get(a)}),i=0,s=0;if(a.length>0){let t=P.filter(e=>e.perFlat);i+=t.length*a.length,s+=t.reduce((t,i)=>t+a.filter(t=>W(d.block,e,i.type,t)).length,0);let n=P.filter(e=>!e.perFlat);i+=n.length,s+=n.filter(t=>W(d.block,e,t.type)).length}let l=!I&&0===a.length,r=!I&&a.length>0&&s===i,c=i>0?Math.round(s/i*100):0;return(0,n.jsxs)("button",{onClick:()=>{g(e),o("tasks")},className:"neu-card animate-in",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px",cursor:"pointer",textAlign:"left",width:"100%",border:"none",fontFamily:"inherit",transition:"all 0.2s ease",animationDelay:`${40*t}ms`,opacity:r?.7:1,...l?{background:"rgba(239, 68, 68, 0.1)",border:"1px solid var(--red)"}:{}},children:[(0,n.jsx)("div",{style:{width:42,height:42,borderRadius:12,flexShrink:0,background:r?"var(--green-light)":l?"var(--red)":"var(--bg-inset)",display:"flex",alignItems:"center",justifyContent:"center",color:r?"var(--green)":l?"white":"var(--text-muted)",fontWeight:800,fontSize:16},children:l?(0,n.jsx)(G,{size:20}):e}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsxs)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:["Floor ",e]}),(0,n.jsx)("div",{style:{fontSize:12,fontWeight:500,color:l?"var(--red)":"var(--text-muted)"},children:l?"No serviceable flats":`${a.length} flats \xb7 ${s}/${i} tasks`})]}),(0,n.jsx)("div",{style:{width:44,textAlign:"right"},children:r?(0,n.jsx)("div",{className:"check-circle done",children:(0,n.jsx)(U,{size:14})}):l?(0,n.jsx)("span",{style:{fontSize:11,fontWeight:700,color:"var(--red)"},children:"LOCKED"}):(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4,color:"var(--text-muted)"},children:[(0,n.jsx)("span",{style:{fontSize:12,fontWeight:700},children:I?"...":`${c}%`}),(0,n.jsx)(ei,{size:16})]})})]},e)})}),(0,n.jsxs)("div",{className:"section-header animate-in animate-in-delay-1",style:{marginTop:20},children:[(0,n.jsx)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:"Block Tasks"}),(0,n.jsx)("span",{className:"section-label",children:"DAILY"})]}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},className:"animate-in animate-in-delay-2",children:$.map(e=>{let t=E(e.id,d.block);return(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px"},children:[(0,n.jsx)("span",{style:{fontSize:22},children:e.icon}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:e.label}),(0,n.jsxs)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:[d.label," Entrance"]})]}),t?(0,n.jsx)("div",{className:"check-circle done",children:(0,n.jsx)(U,{size:14})}):(0,n.jsxs)("button",{onClick:()=>B(e.id,e.type,void 0,d.block),style:{background:"var(--blue)",color:"white",border:"none",borderRadius:10,padding:"8px 14px",fontSize:12,fontWeight:700,cursor:"pointer",fontFamily:"inherit",display:"flex",alignItems:"center",gap:6},children:[(0,n.jsx)(ea,{size:14})," Capture"]})]},e.id)})})]}):null),"tasks"===r&&(()=>{if(!d||!h)return null;let e=d.flatsPerFloor(h);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:20},className:"animate-in",children:[(0,n.jsx)("button",{onClick:R,className:"btn-icon",style:{flexShrink:0},children:(0,n.jsx)(w,{size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)"},children:[d.label," Â· Floor ",h]}),(0,n.jsx)("div",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)"},children:"Floor Tasks"})]})]}),P.filter(e=>e.perFlat).map(t=>(0,n.jsxs)("div",{className:"animate-in animate-in-delay-1",style:{marginBottom:22},children:[(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsxs)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:[t.icon," ",t.label]}),(0,n.jsxs)("span",{className:"section-label",children:[e.length," FLATS"]})]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Math.min(e.length,4)}, 1fr)`,gap:10},children:e.map(e=>{let a=W(d.block,h,t.type,e),i=`${d.block}${e}${h}`,s=z.has(i),l=!!s&&z.get(i),r=s&&!l,o=!s,c=x===`${t.type}-${e}`;return(0,n.jsxs)("button",{onClick:()=>{a||c||r||o||B(t.type,t.type,e,d.block)},disabled:a||c||r||o,className:a?"neu-card":"neu-card-inset",style:{padding:"14px 8px",border:r?"1px solid var(--red)":o?"1px dashed var(--text-muted)":"none",fontFamily:"inherit",cursor:a||r||o?"default":"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:6,opacity:a||r||o?.7:1,transition:"all 0.2s",background:a?"var(--green-light)":r?"rgba(239, 68, 68, 0.1)":o?"rgba(0,0,0,0.05)":void 0},children:[c?(0,n.jsx)(v,{size:20,className:"spin",style:{color:"var(--blue)"}}):a?(0,n.jsx)(U,{size:20,style:{color:"var(--green)"}}):r?(0,n.jsx)(G,{size:20,style:{color:"var(--red)"}}):o?(0,n.jsx)("div",{style:{width:18,height:18}}):(0,n.jsx)(ea,{size:18,style:{color:"var(--text-muted)"}}),(0,n.jsx)("span",{style:{fontSize:13,fontWeight:700,color:a?"var(--green)":r?"var(--red)":o?"var(--text-muted)":"var(--text-primary)"},children:e}),(0,n.jsx)("span",{style:{fontSize:10,fontWeight:600,color:r?"var(--red)":"var(--text-muted)"},children:a?"Done":r?"Unpaid":o?"N/A":"Tap"})]},e)})})]},t.type)),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-2",style:{marginBottom:22},children:[(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:"Area Tasks"}),(0,n.jsx)("span",{className:"section-label",children:"LOBBY & STAIRCASE"})]}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:P.filter(e=>!e.perFlat).map(e=>{let t=W(d.block,h,e.type),a=`${e.type}-area`;return(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px"},children:[(0,n.jsx)("span",{style:{fontSize:22},children:e.icon}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:e.label}),(0,n.jsxs)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:[d.label," Â· Floor ",h]})]}),t?(0,n.jsx)("div",{className:"check-circle done",children:(0,n.jsx)(U,{size:14})}):x===a?(0,n.jsx)(v,{size:20,className:"spin",style:{color:"var(--blue)"}}):(0,n.jsxs)("button",{onClick:()=>B(e.type,e.type,void 0,d.block),className:"btn-primary",style:{background:"var(--blue)",color:"white",border:"none",borderRadius:10,padding:"8px 16px",fontSize:13,fontWeight:700,cursor:"pointer",fontFamily:"inherit",display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)(ea,{size:16})," Capture Proof"]})]},e.type)})})]})]})})(),j?(0,n.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:9999,background:"#000",display:"flex",flexDirection:"column"},children:[(0,n.jsx)("video",{ref:k,autoPlay:!0,playsInline:!0,muted:!0,style:{flex:1,width:"100%",objectFit:"cover"}}),(0,n.jsx)("canvas",{ref:N,style:{display:"none"}}),(0,n.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"24px 0 40px",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(transparent, rgba(0,0,0,0.8))"},children:[(0,n.jsx)("button",{onClick:()=>{L(),f(null)},style:{position:"absolute",left:24,top:24,background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"50%",width:44,height:44,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backdropFilter:"blur(8px)"},children:(0,n.jsx)(G,{size:22,style:{color:"white"}})}),(0,n.jsx)("button",{onClick:q,style:{width:72,height:72,borderRadius:"50%",background:"white",border:"4px solid rgba(255,255,255,0.4)",cursor:"pointer",boxShadow:"0 0 20px rgba(255,255,255,0.3)",transition:"transform 0.1s"},onPointerDown:e=>e.currentTarget.style.transform="scale(0.9)",onPointerUp:e=>e.currentTarget.style.transform="scale(1)"})]}),(0,n.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,padding:"48px 20px 16px",background:"linear-gradient(rgba(0,0,0,0.7), transparent)",textAlign:"center"},children:[(0,n.jsxs)("div",{style:{color:"white",fontSize:14,fontWeight:700},children:["ðŸ“¸ ",y?.flat?`Flat ${y.flat}`:"Area"," â€” ",y?.taskType]}),(0,n.jsx)("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:12,marginTop:4},children:"Take a live photo as proof of work"})]})]}):null]})},eo=c("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),ed=["Floor Cleaner Liquid","Garbage Bags (Large)","Heavy Broom","Glass Detergent","Mop Refills","Disinfectant Spray"],ec=({currentUser:e,requests:t,onRequest:a,staffMembers:i,isManagerView:l=!1})=>{let[r,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[h,g]=(0,s.useState)("LOW");return(0,n.jsxs)("div",{style:{paddingBottom:16},children:[(0,n.jsxs)("div",{className:"animate-in",style:{marginBottom:20},children:[(0,n.jsx)("div",{className:"section-header",children:(0,n.jsx)("span",{className:"section-title",children:"Quick Request"})}),(0,n.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:ed.map(e=>(0,n.jsx)("button",{onClick:()=>o(e),style:{padding:"8px 14px",borderRadius:20,fontSize:12,fontWeight:600,border:"none",cursor:"pointer",fontFamily:"inherit",background:r===e?"var(--green-light)":"var(--bg-card)",color:r===e?"#059669":"var(--text-secondary)",boxShadow:r===e?"var(--neu-inset-sm)":"var(--neu-raised-sm)",transition:"all 0.2s"},children:e},e))})]}),!l&&(0,n.jsx)("form",{onSubmit:t=>{t.preventDefault(),r&&d&&(a({item:r,quantity:d,urgency:h,status:"OPEN",requesterId:e,timestamp:Date.now()}),o(""),c(""),g("LOW"))},children:(0,n.jsxs)("div",{className:"neu-card animate-in animate-in-delay-1",style:{marginBottom:20,padding:22},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:18,paddingBottom:14,borderBottom:"1px solid var(--neu-dark)"},children:[(0,n.jsx)("div",{style:{width:38,height:38,borderRadius:12,background:"var(--coral)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:(0,n.jsx)(p,{size:16})}),(0,n.jsx)("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:"New Request"})]}),(0,n.jsxs)("div",{className:"neu-input-group",style:{marginBottom:14},children:[(0,n.jsx)("label",{className:"neu-label",children:"Item Name"}),(0,n.jsx)("div",{className:"neu-input-wrapper",children:(0,n.jsx)("input",{type:"text",className:"neu-input",value:r,onChange:e=>o(e.target.value),placeholder:"e.g. Floor Cleaner Liquid"})})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:18},children:[(0,n.jsxs)("div",{className:"neu-input-group",style:{flex:1},children:[(0,n.jsx)("label",{className:"neu-label",children:"Quantity"}),(0,n.jsx)("div",{className:"neu-input-wrapper",children:(0,n.jsx)("input",{type:"text",className:"neu-input",value:d,onChange:e=>c(e.target.value),placeholder:"e.g. 5 Liters"})})]}),(0,n.jsxs)("div",{className:"neu-input-group",style:{width:110},children:[(0,n.jsx)("label",{className:"neu-label",children:"Urgency"}),(0,n.jsx)("div",{className:"neu-input-wrapper",children:(0,n.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"neu-input",style:{cursor:"pointer",appearance:"none"},children:[(0,n.jsx)("option",{value:"LOW",children:"Low"}),(0,n.jsx)("option",{value:"MEDIUM",children:"Med"}),(0,n.jsx)("option",{value:"HIGH",children:"High"})]})})]})]}),(0,n.jsxs)("button",{type:"submit",disabled:!r||!d,className:"btn btn-coral",style:{width:"100%",padding:"14px",fontSize:14,fontWeight:700,borderRadius:14,opacity:r&&d?1:.5,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[(0,n.jsx)(eo,{size:16})," Submit Request"]})]})}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-2",children:[(0,n.jsx)("div",{className:"section-header",children:(0,n.jsx)("span",{className:"section-title",children:"Recent Requests"})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[t.slice().reverse().map(e=>(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 18px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:e.item}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:4},children:[(0,n.jsx)("span",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)",background:"var(--bg-card)",boxShadow:"var(--neu-inset-sm)",padding:"2px 10px",borderRadius:8},children:e.quantity}),(0,n.jsx)("span",{style:{fontSize:12,fontWeight:600,color:"HIGH"===e.urgency?"var(--coral)":"MEDIUM"===e.urgency?"var(--yellow)":"var(--text-muted)"},children:e.urgency})]}),(0,n.jsxs)("div",{style:{fontSize:11,color:"var(--text-muted)",marginTop:4},children:["By ",i.find(t=>t.id===e.requesterId)?.name||"Staff"]})]}),(0,n.jsx)("div",{children:"FULFILLED"===e.status?(0,n.jsxs)("span",{className:"badge badge-green",style:{gap:4},children:[(0,n.jsx)(U,{size:12})," Done"]}):(0,n.jsxs)("span",{className:"badge badge-yellow",style:{gap:4},children:[(0,n.jsx)(j,{size:12})," Open"]})})]},e.id)),0===t.length&&(0,n.jsx)("div",{className:"neu-card-inset",style:{textAlign:"center",padding:"32px 20px",color:"var(--text-muted)",fontSize:13,fontWeight:500,fontStyle:"italic"},children:"No supply requests yet."})]})]})]})},eh=({type:e,label:t})=>(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"16px 18px"},children:[(0,n.jsx)("div",{style:{width:42,height:42,borderRadius:14,background:"IN"===e?"var(--green-light)":"var(--coral-light)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"IN"===e?(0,n.jsx)(M,{size:18,color:"#10b981"}):(0,n.jsx)(f,{size:18,color:"#f97066"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-primary)"},children:t}),(0,n.jsx)("div",{style:{fontSize:12,fontWeight:500,color:"var(--text-muted)"},children:"IN"===e?"Clocked in":"Clocked out"})]})]}),eg=({currentUser:e,punchLogs:t,onPunch:a,staffMembers:i,isManagerView:l=!1})=>{let[r,o]=(0,s.useState)(new Date),d=i.find(t=>t.id===e);(0,s.useEffect)(()=>{let e=setInterval(()=>o(new Date),1e3);return()=>clearInterval(e)},[]);let c=new Date().setHours(0,0,0,0);if(l)return(0,n.jsxs)("div",{className:"animate-in",style:{paddingBottom:20},children:[(0,n.jsx)("div",{className:"section-header",children:(0,n.jsx)("span",{className:"section-title",children:"Staff Attendance Overview"})}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:i.map(e=>{let a=t.filter(t=>t.staffId===e.id&&t.timestamp>=c).sort((e,t)=>t.timestamp-e.timestamp),i=a[0]?.type==="IN",s=a[0]?new Date(a[0].timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A",l=[...a].sort((e,t)=>e.timestamp-t.timestamp);for(let e=0;e<l.length;e++)"IN"===l[e].type&&(l[e+1]?.type==="OUT"?l[e+1].timestamp:Date.now(),l[e].timestamp);return(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,n.jsx)("img",{src:e.avatar,alt:e.name,className:"avatar"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700},children:e.name}),(0,n.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)"},children:e.role})]})]}),(0,n.jsxs)("div",{style:{textAlign:"right"},children:[(0,n.jsx)("div",{style:{fontSize:12,fontWeight:700,color:i?"var(--green)":"var(--text-muted)",background:i?"var(--green-light)":"var(--bg-inset)",padding:"4px 8px",borderRadius:6,display:"inline-block",marginBottom:4},children:i?"ON DUTY":"OFF DUTY"}),(0,n.jsx)("div",{style:{fontSize:11,color:"var(--text-muted)"},children:i?`Since ${s}`:`Last: ${s}`})]})]},e.id)})})]});let h=t.filter(t=>t.staffId===e&&t.timestamp>=c).sort((e,t)=>t.timestamp-e.timestamp),g=h[0],p=g?.type==="IN",m=(()=>{let e=0,t=[...h].sort((e,t)=>e.timestamp-t.timestamp);for(let a=0;a<t.length;a++)"IN"===t[a].type&&(e+=(t[a+1]?.type==="OUT"?t[a+1].timestamp:Date.now())-t[a].timestamp);let a=Math.floor(e/6e4);return{hours:Math.floor(a/60),minutes:a%60}})(),x=Math.min(100,Math.round((60*m.hours+m.minutes)/480*100)),u=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),y=2*Math.PI*92;return(0,n.jsxs)("div",{style:{paddingBottom:16},children:[(0,n.jsxs)("div",{className:"animate-in",style:{textAlign:"center",marginBottom:28},children:[(0,n.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)",marginBottom:4},children:"STAFF ATTENDANCE"}),(0,n.jsx)("h2",{style:{fontSize:22,fontWeight:800,color:"var(--text-primary)"},children:d?.name||"Staff"})]}),(0,n.jsx)("div",{className:"animate-in animate-in-delay-1",style:{display:"flex",justifyContent:"center",marginBottom:36},children:(0,n.jsxs)("button",{onClick:()=>{a({staffId:e,type:p?"OUT":"IN",timestamp:Date.now()})},className:`neu-punch-btn ${p?"punch-out":"punch-in"}`,children:[p?(0,n.jsx)(f,{size:36}):(0,n.jsx)(M,{size:36}),(0,n.jsx)("span",{style:{fontSize:18,fontWeight:800,textTransform:"uppercase",letterSpacing:1.5},children:p?"PUNCH OUT":"PUNCH IN"})]})}),(0,n.jsxs)("div",{className:"neu-card-inset animate-in animate-in-delay-2",style:{marginBottom:24,textAlign:"center",padding:28},children:[(0,n.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)",marginBottom:16},children:"HOURS WORKED TODAY:"}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:12},children:(0,n.jsxs)("div",{className:"progress-ring-container",style:{width:200,height:200},children:[(0,n.jsxs)("svg",{width:200,height:200,style:{transform:"rotate(-90deg)"},children:[(0,n.jsx)("circle",{cx:100,cy:100,r:92,fill:"none",stroke:"var(--neu-dark)",strokeWidth:16}),(0,n.jsx)("circle",{cx:100,cy:100,r:92,fill:"none",stroke:"url(#attendanceGradient)",strokeWidth:16,strokeDasharray:y,strokeDashoffset:y-x/100*y,strokeLinecap:"round",style:{transition:"stroke-dashoffset 1s ease-out"}}),(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"attendanceGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#3b82f6"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#1d4ed8"})]})})]}),(0,n.jsxs)("div",{style:{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)("div",{style:{width:40,height:40,borderRadius:"50%",background:"var(--blue-light)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:8},children:(0,n.jsx)(j,{size:18,color:"#3b82f6"})}),(0,n.jsxs)("div",{style:{fontSize:28,fontWeight:800,color:"var(--text-primary)",lineHeight:1},children:[m.hours,"h ",m.minutes.toString().padStart(2,"0"),"m"]}),(0,n.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:.5,color:"var(--text-muted)",marginTop:4},children:"PROGRESS"})]})]})})]}),(0,n.jsxs)("div",{className:"animate-in animate-in-delay-3",children:[(0,n.jsx)("div",{className:"section-header",children:(0,n.jsx)("span",{className:"section-title",children:"Recent Logs"})}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:0===h.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh,{type:"IN",time:"9:00 AM",label:"Punch In: 9:00 AM"}),(0,n.jsx)(eh,{type:"OUT",time:"1:00 PM",label:"Punch Out: 1:00 PM"}),(0,n.jsx)(eh,{type:"IN",time:"2:00 PM",label:"Punch In: 2:00 PM"})]}):h.map(e=>(0,n.jsx)(eh,{type:e.type,time:u(e.timestamp),label:`Punch ${"IN"===e.type?"In":"Out"}: ${u(e.timestamp)}`},e.id))})]})]})},ep=c("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),em=c("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),ex=c("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),eu=c("car-front",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]),ey=c("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ef=c("gallery-vertical-end",[["path",{d:"M7 2h10",key:"nczekb"}],["path",{d:"M5 6h14",key:"u2x4p"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}]]),ev=c("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),ej=c("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),eb=c("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ek=c("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),eS=c("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),eN=c("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),ew=({icon:e,count:t,label:a,color:i})=>(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:36,height:36,borderRadius:12,background:"var(--bg-card)",boxShadow:"var(--neu-raised-sm)",display:"flex",alignItems:"center",justifyContent:"center",color:i},children:e}),(0,n.jsx)("div",{style:{fontSize:16,fontWeight:800,color:"var(--text-primary)"},children:t}),(0,n.jsx)("div",{style:{fontSize:10,fontWeight:600,color:"var(--text-muted)"},children:a})]}),ez=({selectedDate:e,onSelect:t,logs:a})=>{let[i,l]=s.default.useState(new Date(e)),r=new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),o=new Date(i.getFullYear(),i.getMonth(),1).getDay(),d=Array.from({length:r},(e,t)=>t+1),c=Array.from({length:o},(e,t)=>t);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,n.jsx)("button",{onClick:()=>l(new Date(i.getFullYear(),i.getMonth()-1,1)),style:{border:"none",background:"none",fontSize:18,cursor:"pointer",color:"var(--text-primary)"},children:(0,n.jsx)(eb,{size:20})}),(0,n.jsx)("span",{style:{fontSize:16,fontWeight:700,color:"var(--text-primary)"},children:i.toLocaleDateString("en-IN",{month:"long",year:"numeric"})}),(0,n.jsx)("button",{onClick:()=>l(new Date(i.getFullYear(),i.getMonth()+1,1)),style:{border:"none",background:"none",fontSize:18,cursor:"pointer",color:"var(--text-primary)"},children:(0,n.jsx)(ei,{size:20})})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:8,textAlign:"center"},children:[["S","M","T","W","T","F","S"].map((e,t)=>(0,n.jsx)("div",{style:{fontSize:10,fontWeight:700,color:"var(--text-muted)"},children:e},`${e}-${t}`)),c.map((e,t)=>(0,n.jsx)("div",{},`blank-${t}`)),d.map(s=>{let l=new Date(i.getFullYear(),i.getMonth(),s).setHours(0,0,0,0),r=a.some(e=>new Date(e.timestamp).setHours(0,0,0,0)===l),o=s===e.getDate()&&i.getMonth()===e.getMonth()&&i.getFullYear()===e.getFullYear();return(0,n.jsx)("button",{onClick:()=>t(new Date(i.getFullYear(),i.getMonth(),s)),style:{width:32,height:32,borderRadius:"50%",border:"none",cursor:"pointer",background:o?"var(--blue)":r?"var(--green-light)":"transparent",color:o?"white":r?"var(--green)":"var(--text-primary)",fontWeight:o||r?700:400,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center"},children:s},s)})]})]})},eC=({currentUser:e,logs:t,staffMembers:a,isAdmin:i=!1})=>{let[l,r]=(0,s.useState)("ACTIVITY"),[o,d]=(0,s.useState)(new Date),[c,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),m=(0,s.useMemo)(()=>{let a=t;return i||(a=t.filter(t=>t.staffId===e)),a.sort((e,t)=>t.timestamp-e.timestamp)},[t,e,i]),x=new Date().setHours(0,0,0,0),u=new Date().setDate(new Date().getDate()-7),y=(0,s.useMemo)(()=>{let e=m.filter(e=>e.timestamp>=x).length,t=m.filter(e=>e.timestamp>=u).length,a=m.filter(e=>e.taskId.includes("Routine")||e.taskId.includes("Garbage")).length,i=m.filter(e=>e.taskId.includes("broom")||e.taskId.includes("sweep")).length,n=m.filter(e=>e.taskId.includes("mop")).length,s=m.length-a-i-n;return{todayCount:e,weekCount:t,breakdown:{garbage:a,brooming:i,mopping:n,other:s}}},[m,x,u]),f=(0,s.useMemo)(()=>m.filter(e=>{let t=new Date(e.timestamp);return t.getDate()===o.getDate()&&t.getMonth()===o.getMonth()&&t.getFullYear()===o.getFullYear()}),[m,o]);return(0,n.jsxs)("div",{className:"animate-in",children:[g&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>p(null),children:(0,n.jsxs)("div",{style:{position:"relative",maxWidth:"100%",maxHeight:"90%"},children:[(0,n.jsx)("button",{onClick:()=>p(null),style:{position:"absolute",top:-40,right:0,background:"none",border:"none",color:"white"},children:(0,n.jsx)(G,{size:24})}),(0,n.jsx)("img",{src:g,alt:"Proof",style:{maxWidth:"100%",maxHeight:"80vh",borderRadius:8}})]})}),c&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>h(!1),children:(0,n.jsxs)("div",{className:"neu-card",style:{padding:20,background:"var(--bg-card)",width:320},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)(ez,{selectedDate:o,onSelect:e=>{d(e),h(!1)},logs:m}),(0,n.jsx)("button",{className:"neu-button",style:{width:"100%",marginTop:16},onClick:()=>h(!1),children:"Close"})]})}),(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("span",{className:"section-title",children:"Performance Overview"}),(0,n.jsx)("span",{className:"section-label",children:"LIVE STATS"})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:24},children:[(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"20px 16px"},children:[(0,n.jsx)("div",{style:{width:48,height:48,borderRadius:"50%",background:"var(--green-light)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12,color:"var(--green)"},children:(0,n.jsx)(ev,{size:24})}),(0,n.jsx)("div",{style:{fontSize:24,fontWeight:800,color:"var(--text-primary)",lineHeight:1.2},children:y.todayCount}),(0,n.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",marginTop:4},children:"Tasks Today"})]}),(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"20px 16px"},children:[(0,n.jsx)("div",{style:{width:48,height:48,borderRadius:"50%",background:"var(--blue-light)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12,color:"var(--blue)"},children:(0,n.jsx)(ej,{size:24})}),(0,n.jsx)("div",{style:{fontSize:24,fontWeight:800,color:"var(--text-primary)",lineHeight:1.2},children:y.weekCount}),(0,n.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",marginTop:4},children:"Tasks This Week"})]})]}),(0,n.jsxs)("div",{className:"neu-card-inset",style:{padding:20,marginBottom:24},children:[(0,n.jsx)("div",{className:"section-header",style:{marginBottom:16},children:(0,n.jsx)("span",{className:"section-label",children:"WORK BREAKDOWN"})}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[(0,n.jsx)(ew,{icon:(0,n.jsx)(ep,{size:16}),count:y.breakdown.garbage,label:"Garbage",color:"var(--red)"}),(0,n.jsx)(ew,{icon:(0,n.jsx)(em,{size:16}),count:y.breakdown.brooming,label:"Brooming",color:"var(--orange)"}),(0,n.jsx)(ew,{icon:(0,n.jsx)(ey,{size:16}),count:y.breakdown.mopping,label:"Mopping",color:"var(--blue)"})]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:20},children:[(0,n.jsxs)("div",{style:{display:"flex",gap:8,background:"var(--bg-inset)",padding:4,borderRadius:12},children:[(0,n.jsxs)("button",{onClick:()=>r("ACTIVITY"),style:{padding:"8px 16px",borderRadius:8,border:"none",background:"ACTIVITY"===l?"var(--bg-card)":"transparent",color:"ACTIVITY"===l?"var(--blue)":"var(--text-muted)",fontWeight:700,fontSize:12,cursor:"pointer",boxShadow:"ACTIVITY"===l?"var(--neu-raised-sm)":"none",display:"flex",alignItems:"center",gap:6},children:[(0,n.jsx)(eN,{size:14})," Activity"]}),(0,n.jsxs)("button",{onClick:()=>r("REVIEW"),style:{padding:"8px 16px",borderRadius:8,border:"none",background:"REVIEW"===l?"var(--bg-card)":"transparent",color:"REVIEW"===l?"var(--blue)":"var(--text-muted)",fontWeight:700,fontSize:12,cursor:"pointer",boxShadow:"REVIEW"===l?"var(--neu-raised-sm)":"none",display:"flex",alignItems:"center",gap:6},children:[(0,n.jsx)(eS,{size:14})," Review"]})]}),(0,n.jsxs)("button",{onClick:()=>h(!0),className:"neu-button",style:{padding:"8px 12px",fontSize:12,background:"var(--bg-card)",color:"var(--text-primary)"},children:["ðŸ“… ",o.toLocaleDateString("en-IN",{day:"numeric",month:"short"})]})]}),(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("span",{className:"section-title",children:"ACTIVITY"===l?"Activity Log":"Housekeeping Review"}),(0,n.jsx)("span",{className:"section-label",children:o.toLocaleDateString("en-IN",{weekday:"long",month:"long",day:"numeric"})})]}),"ACTIVITY"===l?(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:0===f.length?(0,n.jsx)("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:40,fontSize:13},children:"No activity recorded for this date"}):f.map(e=>{let t=a.find(t=>t.id===e.staffId);return(0,n.jsxs)("div",{className:"neu-card",style:{display:"flex",alignItems:"center",gap:14,padding:"14px 16px"},children:[(0,n.jsx)("div",{style:{width:36,height:36,borderRadius:12,background:"var(--bg-inset)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,flexShrink:0},children:(e=>{let t={width:20,height:20};switch(e){case B.ROUTINE_HOUSEKEEPING:return(0,n.jsx)(ep,{style:{...t,color:"#ef4444"}});case B.BROOMING:return(0,n.jsx)(em,{style:{...t,color:"#f97316"}});case B.MOPPING:return(0,n.jsx)(ex,{style:{...t,color:"#3b82f6"}});case B.DRIVEWAY:return(0,n.jsx)(eu,{style:{...t,color:"#64748b"}});case B.GLASS_CLEANING:return(0,n.jsx)(ey,{style:{...t,color:"#06b6d4"}});case B.STAIRCASE:return(0,n.jsx)(ef,{style:{...t,color:"#8b5cf6"}});default:return(0,n.jsx)(ey,{style:{...t,color:"#94a3b8"}})}})(e.taskId.includes("Routine")?B.ROUTINE_HOUSEKEEPING:B.GLASS_CLEANING)}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsx)("div",{style:{fontSize:14,fontWeight:700,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.taskId}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:4},children:[(0,n.jsxs)("div",{style:{fontSize:11,color:"var(--text-muted)"},children:[new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),i&&t&&(0,n.jsxs)("span",{style:{color:"var(--blue)",fontWeight:600,marginLeft:6},children:["â€¢ ",t.name.split(" ")[0]]})]}),e.block&&(0,n.jsxs)("div",{style:{fontSize:10,fontWeight:700,color:"var(--text-secondary)",background:"var(--bg-inset)",padding:"2px 6px",borderRadius:4},children:["B",e.block," ",e.flat?`- ${e.flat}`:""]})]})]}),e.imageUrl&&(0,n.jsx)("button",{onClick:()=>p(e.imageUrl||null),style:{width:32,height:32,borderRadius:8,border:"none",background:"var(--blue-light)",color:"var(--blue)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:(0,n.jsx)(ek,{size:16})})]},e.id)})}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:24},children:O.map(e=>(0,n.jsxs)("div",{className:"neu-card",style:{padding:16},children:[(0,n.jsxs)("h3",{style:{margin:"0 0 12px 0",fontSize:14,color:"var(--text-muted)",textTransform:"uppercase"},children:["Block ",e.block]}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:F.map(t=>{let a=e.flatsPerFloor(t);return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,n.jsxs)("span",{style:{fontSize:11,fontWeight:600,color:"var(--text-muted)",width:24},children:[t,"F"]}),(0,n.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:a.map(a=>{let i=f.find(i=>i.block===e.block&&i.floor===t&&i.flat===a&&"COMPLETED"===i.status),s=!!i;return(0,n.jsxs)("button",{onClick:()=>i?.imageUrl&&p(i.imageUrl),disabled:!i?.imageUrl,style:{width:42,height:36,borderRadius:6,border:"none",background:s?"var(--green)":"var(--bg-inset)",color:s?"white":"var(--text-muted)",fontSize:11,fontWeight:700,cursor:i?.imageUrl?"pointer":"default",opacity:s?1:.5,position:"relative"},children:[a,s&&i?.imageUrl&&(0,n.jsx)("div",{style:{position:"absolute",top:-2,right:-2,width:8,height:8,borderRadius:"50%",background:"var(--blue)",border:"1px solid white"}})]},a)})})]},t)})})]},e.block))})]})},eI=({icon:e,label:t,active:a,onClick:i})=>(0,n.jsxs)("button",{className:`nav-item ${a?"active":""}`,onClick:i,children:[e,(0,n.jsx)("span",{children:t})]}),eM=()=>{let{isLoggedIn:e,role:t,staffId:a,staffName:i,loading:l,logout:r}=(0,N.useAuth)(),[o,d]=(0,s.useState)(1),[c,b]=(0,s.useState)("HOME"),[k,w]=(0,s.useState)("TASKS"),[z,C]=(0,s.useState)(!1),[I,M]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{let e=setInterval(()=>M(new Date),1e3);return()=>clearInterval(e)},[]);let[A,T]=(0,s.useState)([]),[D,W]=(0,s.useState)([]),[B,F]=(0,s.useState)([]),[L,O]=(0,s.useState)([]),[P,$]=(0,s.useState)(!1);(0,s.useEffect)(()=>{a&&d(a)},[a]),(0,s.useEffect)(()=>{e&&($(!0),Promise.all([(0,E.fetchStaffMembers)().catch(()=>[]),(0,E.fetchTaskLogs)().catch(()=>[]),(0,E.fetchPunchLogs)().catch(()=>[]),(0,E.fetchSupplyRequests)().catch(()=>[])]).then(([e,t,a,i])=>{T(e),W(t),O(a),F(i),$(!1)}))},[e]);let H=async e=>{try{let t=await (0,E.insertTaskLog)(e);W(e=>[t,...e])}catch{let t={...e,id:Math.random().toString(36).substr(2,9)};W(e=>[t,...e])}},U=async e=>{try{let t=await (0,E.insertSupplyRequest)(e);F(e=>[t,...e])}catch{let t={...e,id:Math.random().toString(36).substr(2,9)};F(e=>[t,...e])}},G=async e=>{try{await (0,E.updateSupplyStatus)(e,"FULFILLED")}catch{}F(t=>t.map(t=>t.id===e?{...t,status:"FULFILLED"}:t))},q=async e=>{try{await (0,E.updateSupplyStatus)(e,"REJECTED")}catch{}F(t=>t.map(t=>t.id===e?{...t,status:"REJECTED"}:t))},V=async e=>{try{let t=await (0,E.insertPunchLog)(e);O(e=>[t,...e])}catch{let t={...e,id:Math.random().toString(36).substr(2,9)};O(e=>[t,...e])}},Y=()=>{if(0===D.length)return void alert("No logs to export.");let e=new Blob([["Date,Time,Staff,Task,Type,Block,Floor,Flat,Status",...D.map(e=>[new Date(e.timestamp).toLocaleDateString(),new Date(e.timestamp).toLocaleTimeString(),A.find(t=>t.id===e.staffId)?.name||"Unknown",e.taskId,"Task",e.block||"-",void 0!==e.floor?e.floor:"-",e.flat||"-",e.status].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),a=URL.createObjectURL(e);t.setAttribute("href",a),t.setAttribute("download",`society_logs_${new Date().toISOString().split("T")[0]}.csv`),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)};if(l)return(0,n.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg)"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)(v,{size:40,className:"spin",style:{color:"var(--blue)",marginBottom:16}}),(0,n.jsx)("div",{style:{fontSize:14,fontWeight:600,color:"var(--text-muted)"},children:"Loading..."})]})});if(!e)return(0,n.jsx)(R,{});let _="admin"===t,K=i||"User",J=()=>_?"HOME"===c?"MANAGEMENT":"STAFF"===c?"STAFF ATTENDANCE":"":"ATTENDANCE"===k?"STAFF ATTENDANCE":K;return(0,n.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",maxWidth:430,margin:"0 auto",position:"relative"},children:[(0,n.jsxs)("header",{className:"app-header",children:[(0,n.jsxs)("div",{children:[J()&&(0,n.jsx)("div",{style:{fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,color:"var(--text-muted)",marginBottom:2},children:J()}),(0,n.jsx)("h1",{style:{fontSize:22,fontWeight:800,color:"var(--text-primary)",lineHeight:1.2,whiteSpace:"pre-line"},children:_?"HOME"===c?"Admin\nManagement Hub":"STAFF"===c?"Staff Attendance":"STOCK"===c?"Supplies":"Reports":"ATTENDANCE"===k?"Staff Attendance":"STOCK"===k?"Supplies":"My Tasks"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:6},children:[(0,n.jsx)(j,{size:13,style:{color:"var(--text-muted)"}}),(0,n.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"var(--text-secondary)",fontVariantNumeric:"tabular-nums"},children:[I.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})," Â· ",I.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})]})]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("button",{className:"neu-dark-toggle",onClick:()=>{C(!z),document.body.classList.toggle("dark-mode")},children:z?(0,n.jsx)(u,{size:18}):(0,n.jsx)(x,{size:18})}),(0,n.jsxs)("button",{className:"neu-logout-btn",onClick:r,children:[(0,n.jsx)(f,{size:14}),(0,n.jsx)("span",{children:"Logout"})]})]})]}),(0,n.jsxs)("main",{style:{flex:1,padding:"0 16px 100px",overflowY:"auto"},children:[(()=>{if(P)return(0,n.jsxs)("div",{style:{textAlign:"center",padding:60},children:[(0,n.jsx)(v,{size:32,className:"spin",style:{color:"var(--blue)"}}),(0,n.jsx)("div",{style:{marginTop:12,fontSize:13,color:"var(--text-muted)"},children:"Loading data..."})]});if(_)switch(c){case"HOME":default:return(0,n.jsx)(et,{logs:D,tasks:[],supplyRequests:B,onApproveSupply:G,onRejectSupply:q,staffMembers:A,punchLogs:L,onNavigate:e=>b(e),onExport:Y});case"STAFF":return(0,n.jsx)(eg,{currentUser:o,punchLogs:L,onPunch:V,staffMembers:A,isManagerView:!0});case"STOCK":return(0,n.jsx)(ec,{currentUser:o,requests:B,onRequest:U,staffMembers:A,isManagerView:!0});case"LOGS":return(0,n.jsx)(eC,{currentUser:o,logs:D,staffMembers:A,isAdmin:!0})}switch(k){case"ATTENDANCE":return(0,n.jsx)(eg,{currentUser:o,punchLogs:L,onPunch:V,staffMembers:A});case"STOCK":return(0,n.jsx)(ec,{currentUser:o,requests:B,onRequest:U,staffMembers:A});case"LOGS":return(0,n.jsx)(eC,{currentUser:o,logs:D,staffMembers:A});default:return(0,n.jsx)(er,{currentUser:o,logs:D,onLogTask:H,staffMembers:A})}})(),(0,n.jsx)(S,{})]}),_?(0,n.jsxs)("div",{className:"bottom-nav",children:[(0,n.jsx)(eI,{icon:(0,n.jsx)(h,{size:22}),label:"Home",active:"HOME"===c,onClick:()=>b("HOME")}),(0,n.jsx)(eI,{icon:(0,n.jsx)(g,{size:22}),label:"Staff",active:"STAFF"===c,onClick:()=>b("STAFF")}),(0,n.jsx)(eI,{icon:(0,n.jsx)(p,{size:22}),label:"Stock",active:"STOCK"===c,onClick:()=>b("STOCK")}),(0,n.jsx)(eI,{icon:(0,n.jsx)(m,{size:22}),label:"Logs",active:"LOGS"===c,onClick:()=>b("LOGS")})]}):(0,n.jsxs)("div",{className:"bottom-nav",children:[(0,n.jsx)(eI,{icon:(0,n.jsx)(y,{size:22}),label:"Tasks",active:"TASKS"===k,onClick:()=>w("TASKS")}),(0,n.jsx)(eI,{icon:(0,n.jsx)(g,{size:22}),label:"Staff",active:"ATTENDANCE"===k,onClick:()=>w("ATTENDANCE")}),(0,n.jsx)(eI,{icon:(0,n.jsx)(p,{size:22}),label:"Stock",active:"STOCK"===k,onClick:()=>w("STOCK")}),(0,n.jsx)(eI,{icon:(0,n.jsx)(m,{size:22}),label:"Logs",active:"LOGS"===k,onClick:()=>w("LOGS")})]})]})};function eA(){return(0,n.jsx)(eM,{})}e.s(["default",()=>eA],31713)}]);